This is the general algorithm I'm using to go from regular expression to hdl.  I discovered I didn't need the parse tree.

The NFA can be constructed directly from the regular expression represented as a string.

<img src="https://bmeridet.github.io/images/general_alg.png">

<img src="https://bmeridet.github.io/images/block_ram.png">
